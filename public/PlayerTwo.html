<!DOCTYPE html>
<html>
    <head>
        <title>user click Test</title>
        <meta charset="utf-8" />
    </head>

    <body>

        <a-scene experience-manager background="color:rgb(0, 255, 255);">
            <a-entity camera="fov: 25;" position="0 80 -20" rotation="-90 -90 0"></a-entity>

            <a-entity geometry="primitive:box; width:2; height:2; depth: 2" material="color:white; roughness: 1;" position="0 5 10"></a-entity>

        </a-scene>

        <!-- our buttond to tell others -->
        <button id="start_light" style="background-color:rgb(124, 124, 124); color:rgb(255, 255, 255)">start light</button>
        <button id="magenta_light" style="background-color:rgb(255, 0, 255); color:rgb(255, 255, 255)">magenta light</button>
        <button id="cyan_light" style="background-color:rgb(0, 255, 255); color:rgb(255, 255, 255)">cyan light</button>
        <button id="blue_light" style="background-color:rgb(0, 0, 255); color:rgb(255, 255, 255)">blue light</button>
        <button id="green_light" style="background-color:rgb(0, 255, 0); color:rgb(255, 255, 255)">green light</button>
        <button id="red_light" style="background-color:rgb(255, 0, 0); color:rgb(255, 255, 255)">red light</button>
        <button id="end_light" style="background-color:rgb(126, 126, 126); color:rgb(255, 255, 255)">end light</button>
        <br>
        <canvas id="myCanvas" width="1000" height="1000" style="border:1px solid #000000;"></canvas> 
        

        <!-- this is magic code created when the node server runs -->
        <!-- //VERY HANDY! https://socket.io/docs/v3/emit-cheatsheet/  -->
        <script src="/socket.io/socket.io.js"></script>
        <script>
            let socket = io();

            socket.on('connect', (userData) => {
                console.log('I exist!');

                //put code here so that we know that socket.io has initailized ...
                document.querySelector('#start_light').addEventListener('mousedown', function(){
                    socket.emit('lightchange', 'start_light');
                });

                document.querySelector('#magenta_light').addEventListener('mousedown', function(){
                    socket.emit('lightchange', 'magenta_light');
                });

                document.querySelector('#cyan_light').addEventListener('mousedown', function(){
                    socket.emit('lightchange', 'cyan_light');
                });

                document.querySelector('#blue_light').addEventListener('mousedown', function(){
                    socket.emit('lightchange', 'blue_light');
                });

                document.querySelector('#green_light').addEventListener('mousedown', function(){
                    socket.emit('lightchange', 'green_light');
                });

                document.querySelector('#red_light').addEventListener('mousedown', function(){
                    socket.emit('lightchange', 'red_light');
                });

                document.querySelector('#end_light').addEventListener('mousedown', function(){
                    socket.emit('lightchange', 'end_light');
                });




                //listen to event from server
                socket.on('displayLocation', (locX, locZ) => {
                    console.log(locX + ', ' + locZ);

                    var canvas = document.getElementById("myCanvas");
                    var ctx = canvas.getContext("2d");
                    ctx.fillStyle = "#FF0000";
                    ctx.fillRect( 500 - locX * 10, 500 - locZ * 10,10,10);
                });
            });

        </script>



    </body>
</html>